import{m as I,A as P,B,C as J,v as x,D,h as r,E as $,G as N,I as E,l as k,q as g,H as M,J as z,n as Q,K as W,_ as L,b as w,f as T,o as _,c as f,w as h,F as V,r as F,j as R,t as j,x as X,u as Z,e as ee,g as te,a as p,i as ne,L as ae,p as oe,k as se}from"./index-cd05b7f8.js";import{T as ce,a as ie}from"./index-1c80610b.js";import{_ as O}from"./Header-6f26eca5.js";import{_ as H}from"./ListItem-75d078a8.js";import{r as K,u as U}from"./use-route-76b460df.js";import{b as de}from"./api-c5e0122c.js";import{A as re,a as le,b as ue}from"./index-0e732ae5.js";import"./use-id-f24096b5.js";import"./index-5e69962c.js";import"./use-placeholder-3143572e.js";import"./index-20202c56.js";const[me,C]=I("action-bar-icon"),_e=P({},K,{dot:Boolean,text:String,icon:String,color:String,badge:B,iconClass:J,badgeProps:Object,iconPrefix:String});var ve=x({name:me,props:_e,setup(e,{slots:n}){const o=U();D(re);const i=()=>{const{dot:l,badge:u,icon:a,color:s,iconClass:c,badgeProps:t,iconPrefix:d}=e;return n.icon?r(N,$({dot:l,class:C("icon"),content:u},t),{default:n.icon}):r(E,{tag:"div",dot:l,name:a,badge:u,color:s,class:[C("icon"),c],badgeProps:t,classPrefix:d},null)};return()=>r("div",{role:"button",class:C(),tabindex:0,onClick:o},[i(),n.default?n.default():e.text])}});const be=k(ve),[Y,fe]=I("sidebar"),q=Symbol(Y),pe={modelValue:g(0)};var ge=x({name:Y,props:pe,emits:["change","update:modelValue"],setup(e,{emit:n,slots:o}){const{linkChildren:i}=M(q),l=()=>+e.modelValue;return i({getActive:l,setActive:a=>{a!==l()&&(n("update:modelValue",a),n("change",a))}}),()=>{var a;return r("div",{role:"tablist",class:fe()},[(a=o.default)==null?void 0:a.call(o)])}}});const he=k(ge),[Ie,S]=I("sidebar-item"),xe=P({},K,{dot:Boolean,title:String,badge:B,disabled:Boolean,badgeProps:Object});var ke=x({name:Ie,props:xe,emits:["click"],setup(e,{emit:n,slots:o}){const i=U(),{parent:l,index:u}=D(q);if(!l)return;const a=()=>{e.disabled||(n("click",u.value),l.setActive(u.value),i())};return()=>{const{dot:s,badge:c,title:t,disabled:d}=e,m=u.value===l.getActive();return r("div",{role:"tab",class:S({select:m,disabled:d}),tabindex:d?void 0:0,"aria-selected":m,onClick:a},[r(N,$({dot:s,class:S("text"),content:c},e.badgeProps),{default:()=>[o.title?o.title():t]})])}}});const Ce=k(ke),[Ae,b]=I("tree-select"),ye={max:g(1/0),items:z(),height:g(300),selectedIcon:Q("success"),mainActiveIndex:g(0),activeId:{type:[Number,String,Array],default:0}};var Se=x({name:Ae,props:ye,emits:["clickNav","clickItem","update:activeId","update:mainActiveIndex"],setup(e,{emit:n,slots:o}){const i=t=>Array.isArray(e.activeId)?e.activeId.includes(t):e.activeId===t,l=t=>{const d=()=>{if(t.disabled)return;let m;if(Array.isArray(e.activeId)){m=e.activeId.slice();const v=m.indexOf(t.id);v!==-1?m.splice(v,1):m.length<+e.max&&m.push(t.id)}else m=t.id;n("update:activeId",m),n("clickItem",t)};return r("div",{key:t.id,class:["van-ellipsis",b("item",{active:i(t.id),disabled:t.disabled})],onClick:d},[t.text,i(t.id)&&r(E,{name:e.selectedIcon,class:b("selected")},null)])},u=t=>{n("update:mainActiveIndex",t)},a=t=>n("clickNav",t),s=()=>{const t=e.items.map(d=>r(Ce,{dot:d.dot,badge:d.badge,class:[b("nav-item"),d.className],disabled:d.disabled,onClick:a},{title:()=>o["nav-text"]?o["nav-text"](d):d.text}));return r(he,{class:b("nav"),modelValue:e.mainActiveIndex,onChange:u},{default:()=>[t]})},c=()=>{if(o.content)return o.content();const t=e.items[+e.mainActiveIndex]||{};if(t.children)return t.children.map(l)};return()=>r("div",{class:b(),style:{height:W(e.height)}},[s(),r("div",{class:b("content")},[c()])])}});const Pe=k(Se);const Be={components:{ListItem:H},props:["index","foodData"],setup(e){let n=w({activeIndex:0,items:[],subItem:[]});const o=()=>{var s,c;let a=[];(c=(s=e.foodData)==null?void 0:s.items)==null||c.forEach((t,d)=>{a.push({text:t.text}),n.activeIndex===d&&(n.subItem=t.children)}),n.items=a};o();const i=a=>{n.activeIndex=a,o()},l=a=>{n.subItem.forEach((s,c)=>{s.id===a&&(s.add=!1,s.num+=1)})},u=(a,s)=>{n.subItem.forEach(c=>{c.id===s.name&&(c.num=a)}),console.log(n.subItem)};return{...T(n),navClick:i,handleAdd:l,handlecChange:u}}},De={key:0,class:"food-list"},$e={key:1};function Ne(e,n,o,i,l,u){const a=H,s=Pe;return o.index===0?(_(),f("div",De,[r(s,{"main-active-index":e.activeIndex,"onUpdate:mainActiveIndex":n[0]||(n[0]=c=>e.activeIndex=c),height:"88vw",items:e.items,onClickNav:i.navClick},{content:h(()=>[(_(!0),f(V,null,F(e.subItem,(c,t)=>(_(),f("div",{key:t,class:"item-bg"},[(_(),R(a,{item:c,handleAdd:i.handleAdd,handlecChange:i.handlecChange,key:t},null,8,["item","handleAdd","handlecChange"]))]))),128))]),_:1},8,["main-active-index","items","onClickNav"])])):(_(),f("div",$e,j(o.foodData.content),1))}const Ee=L(Be,[["render",Ne],["__scopeId","data-v-b6844b01"]]);const Le={components:{Header:O,FoodList:Ee},setup(){let e=X();const n=Z();let o=w({title:"鸿运酸菜鱼",img:"http://5b0988e595225.cdn.sohucs.com/images/20180327/00c319222b514e63939f2ab03d74e29e.jpeg",storeData:[]});const i=()=>{de().then(s=>{o.storeData=s})};ee(()=>{i()});const l=s=>{const c=e.state.cartList||[];if(o.storeData.forEach(t=>{var d;(d=t.data.items)==null||d.forEach(m=>{m.children.forEach(v=>{v.num>0&&c.push(v)})})}),c.length===0){ae("还未购买哟~");return}e.commit("ADDCART",c),s==="buy"&&u()},u=()=>{n.push("/cart")},a=()=>{l("buy")};return{...T(o),handleAddCart:l,store:e,goCart:u,goBuy:a}}},G=e=>(oe("data-v-186602e3"),e=e(),se(),e),we={class:"storeDetails"},Te={class:"content"},Ve=G(()=>p("div",{class:"img"},null,-1)),Fe={class:"foodSort"},Re=G(()=>p("div",{class:"sort"},null,-1)),je={class:"name"},Oe=["src"];function He(e,n,o,i,l,u){const a=O,s=te("FoodList"),c=ie,t=ce,d=be,m=ue,v=le;return _(),f("div",we,[r(a,{title:"店铺"}),p("div",Te,[Ve,p("div",Fe,[Re,p("div",je,[ne(j(e.title)+" ",1),p("img",{src:e.img,alt:"",class:"store-img"},null,8,Oe)]),r(t,{color:"#ffc400"},{default:h(()=>[(_(!0),f(V,null,F(e.storeData,(A,y)=>(_(),R(c,{key:y,title:A.name},{default:h(()=>[r(s,{index:y,foodData:A.data},null,8,["index","foodData"])]),_:2},1032,["title"]))),128))]),_:1})])]),r(v,null,{default:h(()=>[r(d,{icon:"chat-o",text:"客服"}),r(d,{icon:"cart-o",text:"购物车",badge:i.store.state.cartList.length,onClick:i.goCart},null,8,["badge","onClick"]),r(m,{type:"warning",text:"加入购物车",onClick:i.handleAddCart},null,8,["onClick"]),r(m,{type:"danger",text:"立即购买",onClick:i.goBuy},null,8,["onClick"])]),_:1})])}const Ze=L(Le,[["render",He],["__scopeId","data-v-186602e3"]]);export{Ze as default};
